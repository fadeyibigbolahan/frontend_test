import{r as t,d as h,j as e,g as p,u as f}from"./index-lqzjE6s4.js";import{G as b,R as g}from"./RefferalOrgNode-CgNXiJbi.js";const w=()=>{const[s,o]=t.useState(null),[a,i]=t.useState(""),[l,u]=t.useState(""),{user:c}=h();t.useEffect(()=>{if(!c)return;(async()=>{try{const n=l,x=await p.get(`${f}users/bv-referral-tree/${n}`,{headers:{Authorization:`${localStorage.getItem("token")}`}});o(x.data.tree)}catch(n){console.error("Error fetching tree:",n),o(null)}})()},[l,c]);const d=()=>{a.trim().toLowerCase()&&u(a.trim().toLocaleLowerCase())},m=r=>{r.key==="Enter"&&d()};return e.jsxs("div",{className:"overflow-auto p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"BV Referral Tree Viewer"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-2 items-center mb-6",children:[e.jsx("input",{type:"text",placeholder:"Enter username",value:a,onChange:r=>i(r.target.value),onKeyDown:m,className:"border border-gray-300 rounded p-2 w-full max-w-sm"}),e.jsx("button",{onClick:d,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"View Tree"})]}),s?e.jsx(b,{lineWidth:"2px",lineColor:"#ccc",lineBorderRadius:"10px",label:e.jsxs("div",{className:"bg-blue-100 p-3 rounded shadow-md text-center border border-blue-300",children:[e.jsxs("strong",{children:["@",s.username]}),e.jsxs("div",{className:"text-sm",children:[s.package.name," (",s.package.bv," bv)"]}),e.jsxs("div",{className:"text-sm",children:["Total BV: ",s.bv]})]}),children:s.referrals.map(r=>e.jsx(g,{node:r},r.username))}):e.jsx("p",{className:"text-gray-500",children:"Loading or no tree found..."})]})};export{w as default};
